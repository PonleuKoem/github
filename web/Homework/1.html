<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="css.css">
    <style>
        .center{
            text-align: center;
            vertical-align: middle;
        }
        .color1{
            background-color: #b76de8;
        }
        .color2{
            background-color: #dc3434;
        }
        .color3{
            background-color: #f59696;
        }
        .color4{
            background-color: #c30c9e;
        }
        .box{
            height: 100px;
        }
        .modal-dialog{
          width: 1000px;
        }
        .thum{
          padding: 0;
          margin-bottom: -20px;
        }
    </style>
    <script>
    </script>
    <!-- <script type="text/javascript" src="script.js"></script> -->
    <!-- Latest compiled and minified CSS -->
    <!-- Latest compiled JavaScript -->
    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->

</head>

<body onload="">

    <div id="login-overlay" class="modal-dialog" style="width: 1000px">
      <div class="modal-content">
          <div class="modal-header">
              <h4 class="pull-left" id="">Internet Payment</h4>
              <h5 class="pull-right" id="">Copyright © 2017 · KOEM Ponleu</h5>
          </div>
          <div class="modal-body">
              <div class="row">
                  <div class="col-md-9">
                        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-6 thum">
                          <div class="panel price panel-red">
                            <div class="panel-heading  text-center">
                            <h3>Start Time:</h3>
                            </div>
                            <div class="panel-body text-center">
                              <p class="lead" style="font-size:40px"><strong id="st">00:00</strong></p>
                            </div>                            
                          </div>
                        </div>
                        
                        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-6 thum">
                          <div class="panel price panel-blue">
                            <div class="panel-heading arrow_box text-center">
                            <h3>Stop Time:</h3>
                            </div>
                            <div class="panel-body text-center">
                              <p class="lead" style="font-size:40px"><strong id="stp">00:00</strong></p>
                            </div>                            
                          </div>
                        </div>
                        
                        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-6 thum">
                          <div class="panel price panel-green">
                            <div class="panel-heading arrow_box text-center">
                            <h3>Duration:</h3>
                            </div>
                            <div class="panel-body text-center">
                              <p class="lead" style="font-size:40px"><strong id="mn">Minute</strong></p>
                            </div>                            
                          </div>
                        </div>
                        
                        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-6 thum">
                          <div class="panel price panel-grey">
                            <div class="panel-heading arrow_box text-center">
                            <h3>Total Payment</h3>
                            </div>
                            <div class="panel-body text-center">
                              <p class="lead" style="font-size:40px"><strong id="result">Riel</strong></p>
                            </div>
                          </div>
                        </div> 
                  </div>
                  <div class="col-md-3">  
                    <div class="col-md-12 well">
                      <p class="lead center"><span class="text-success">APPLY RULES</span></p>
                      <ul class="list-unstyled center" style="line-height: 2">
                          <li><span class="fa fa-check text-success"></span> 00 minute -> 15 minutes: 500R</li>
                          <li><span class="fa fa-check text-success"></span> 16 minutes -> 30 minutes: 700R</li>
                          <li><span class="fa fa-check text-success"></span> 31 minutes -> 60 minutes: 1500R</li>
                      </ul>  
                    </div> 
                    <div class="col-md-12 well">
                      <p class="lead center" style="font-size:18px; color: #d07335;"><strong id="msg">Click "Start" to play</strong></p>
                  </div>                   
                  </div>
              </div>
          </div>
          <div class="modal-footer">
            <div class="col-md-12">
              <input type="button" class="btn btn-lg btn-warning" value="Start" id="btn" onclick="start()" style="width: 100%">
            </div>
          </div>
      </div>
    </div>
    <script>
      
      function start(){
        var msg = document.getElementById("msg"); 

        // +++++++++++++++++++++++++++++++++++++++ condition if Start
        if(btn.addEventListener && btn.value=="Start") {            
            var today = new Date();
                var h1 = today.getHours();
                var m1 = today.getMinutes();
                var s1 = today.getSeconds();
                var d1 = today.getDate();
                hh1 = checkTime(h1);
                mm1 = checkTime(m1);
                ss1 = checkTime(s1);

                var dat1 = hh1 + ":" + mm1 + ":" + ss1;
                st.innerHTML=dat1;

            // +++++++++++++++++++++++++++++++++++++++ Function Interval
            var intervalListener = setInterval(function() { // }, 1000);
                
                var today1 = new Date();
                var h2 = today1.getHours();
                var m2 = today1.getMinutes();
                var s2 = today1.getSeconds();
                var d2 = today1.getDate();
                hh2 = checkTime(h2);
                mm2 = checkTime(m2);
                ss2 = checkTime(s2);

                var dat2 = hh2 + ":" + mm2 + ":" + ss2;
                stp.innerHTML=dat2;
                btn.value="Stop";
                msg.innerHTML = "You are playing!";


                // +++++++++++++++++++++++++++++++++++++++ condition if Stop
                if (btn.addEventListener && btn.value=="Stop") {
                    btn.addEventListener("click", function() {

                        clearInterval(intervalListener); //this is clear interval
                        msg.innerHTML = "You have stoped!";
                        btn.value="Clear";


                        var toto = today1-today;
                        mi = toto;
                        ss = mi/1000; 
                        min = ss/60;

                        hour = min/60;
                        exHour = Math.floor(hour);
                        dd = exHour/24;
                        exdd = Math.floor(dd);

                        minute2 = (hour%1)*60;
                        exMinute = Math.floor(minute2);

                        second2 = Math.round((minute2%1)*60);
                        exSecond = Math.floor(second2);

                        var ii = exHour+" h "+exMinute+" min ";
                        if (exdd>0) {var ii = +exdd+"  d "+exHour+" h "+exMinute+" min ";}
                        mn.innerHTML =ii;
                        
                        var x = 500, y = 700, z = 1500, dm = 24;
                        if(exMinute==0){  exSecond>0){  result.innerHTML = x+((exHour+(exdd*dm))*z)+" Riel";  }
                        else if(exMinute>0 && exMinute<=15)   { result.innerHTML = x+((exHour+(exdd*dm))*z)+" Riel";  }
                        else if(exMinute>15 && exMinute<=30)  { result.innerHTML = y+((exHour+(exdd*dm))*z)+" Riel";  }
                        else if(exMinute>30 && exMinute<=60)  { result.innerHTML = z+((exHour+(exdd*dm))*z)+" Riel";  }
                        else{result.innerHTML = "Unknown"}


                        // +++++++++++++++++++++++++++++++++++++++ condition if Clear to reload page
                        if (btn.addEventListener && btn.value=="Clear") {
                            btn.addEventListener("click", function() {window.location.reload();}, false);
                        }

                    }, false);                     
                }//end condition if Stop          
            }, 1000);// End setInterval
        } //end condition if Start
    }//end function start()
    function checkTime(i) {
        if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
        return i;
    }
    </script>
</body>
</html>
